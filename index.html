<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Users</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    </head>
    <body>
        <div id="app">
            <div class="container">
                <div class="btn-toolbar" role="toolbar" style="justify-content: center; display: flex;">
                    <div class="btn-group mr-2" role="group">
                        <button id="prevBtn" type="button" class="btn btn-light"><</button>
                    </div>
                    <div class="btn-group mr-2" role="group">
                        <button type="button" class="btn btn-light">1</button>
                        <button type="button" class="btn btn-light">2</button>
                        <button type="button" class="btn btn-light">3</button>
                    </div>
                    <div class="btn-group" role="group">
                        <button id="nextBtn" type="button" class="btn btn-light">></button>
                    </div>
                </div>
                
                <ul class="list-group list-group-flush">
                    <li class="list-group-item" v-for="(user, index) in pages[currentPage]" v-bind:key="index">
                        <img class="rounded-circle mr-3" v-bind:src="user.picture.thumbnail" /> {{ user.name.first }} {{ user.name.last }}
                    </li>
                </ul>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
        <script>
            const vm = new Vue({
                el: '#app',
                data: {
                    users: null,
                    pages: [],
                    currentPage: null,
                }
            });

            const getUsers = async () => {
                await fetch('https://randomuser.me/api/?nat=us&results=500&inc=name,location,email,dob,phone,picture')
                .then(response => response.json())
                .then(data => {
                    console.log('Success: ', data);
                    vm.users = data.results;
                    for (let i = 0; i < vm.users.length / 25; i++) {
                        let page = []
                        for (let j = 0; j < 25; j++) {
                            page.push(vm.users[j + (i * 25)])
                        }
                        vm.pages.push(page);
                    }
                    vm.currentPage = 0;
                })
                .catch(error => console.log('Error: ', error))
            };
    
            const prevPage = () => {
                vm.currentPage--
            };
            
            const nextPage = () => {
                vm.currentPage++
            };

            document.querySelector('#prevBtn').addEventListener('click', prevPage)
            document.querySelector('#nextBtn').addEventListener('click', nextPage)
            document.addEventListener('DOMContentLoaded', getUsers)
        </script>
    </body>
</html>